{% extends 'mainpage/base.html' %}
{% load static %}

{% block title %}Posts{% endblock %}

{% block content %}
  <div class="container py-4">

    <div class="container py-4">
    <h2 class="text-light mb-4">Posts</h2>

{% if user.is_authenticated %}
<div id="createPostCard" class="card bg-dark text-white shadow-sm mb-4" style="cursor: pointer;">
  <div class="card-body d-flex align-items-center">
    <img src="https://via.placeholder.com/40" class="rounded-circle me-3" alt="User" width="40" height="40">
    <input type="text" class="form-control bg-secondary text-white" placeholder="What's on your mind?" disabled>
  </div>
</div>

<script>
  document.getElementById('createPostCard').addEventListener('click', function() {
    window.location.href = "{% url 'create_post' %}";
  });
</script>
{% endif %}


    {% for post in posts %}
    
    {% empty %}
      <p class="text-light">No posts available.</p>
    {% endfor %}
  </div>


  <h2 class="text-light mb-4">Latest Blog Posts</h2>

  {% for post in posts %}
    <div class="card bg-dark text-light mb-4 shadow-sm border-secondary">
      <div class="card-body">
        <h4 class="card-title">
          <a href="{% url 'post_detail' slug=post.slug %}" class="text-decoration-none text-light">
            {{ post.title }}
          </a>
        </h4>
        <p class="card-subtitle small mb-2">
          By {{ post.author.username }} Â· {{ post.created_at|date:"M d, Y" }}
        </p>
        <p class="card-text">
          {{ post.content|truncatewords:40 }}
        </p>
        <a href="{% url 'post_detail' slug=post.slug %}" class="btn btn-outline-light btn-sm mt-2">Read More</a>
      </div>
    </div>
  {% empty %}
    <p class="text-light">No posts have been published yet.</p>
  {% endfor %}
</div>
{% endblock %}
